---
layout: post
title: "영변(영웅 변신) 획득은 플레이 변화에 영향을 미칠까?"
date: 2021-05-10 17:32:00
categories: Works
author : DANBI
cover: "/assets/l2m_cover.jpg"
---



# **들어가며**

 현실 경제에서 우리는 "어떤 큰 행운이 발생하였을 때, 그 이후 사람들은 더 열심히 생활하게 되는가?"라는 궁금증을 한번쯤은 가져보았을 것입니다. 로또에서 높은 금액에 당첨된 사람은 그 이후 더 열심히 사는가? 라는 주제가 적절한 예시인 것 같습니다. 다소 예전에 발간되었지만 "비근로로 얻은 소득(로또 당첨)이 이후 근로로 얻은 소득, 저축, 지출에 영향을 미치는가?"에 대한 주제를 다루는 논문이 있습니다. 해당 논문에서는 1980년대 중반에 매사추세츠에서 로또를 한 사람들을 대상으로 설문 조사를 실시한 결과, 당첨자들은 평균적으로 돈을 받은 이후 10년 안에 수령금의 84%를 다 쓴다는 결과가 나왔습니다. 

 이러한 사례가 게임에서는 어떻게 나타날까라는 궁금증으로 주제를 찾아보던 중 NC SOFT의 대표적인 게임 중 리니지2M에 이와 유사한 경우가 있어 분석을 진행하게 되었습니다. 

 분석 주제에 대한 배경을 설명드리면 리니지2M에서는 클래스 카드를 획득하고 캐릭터가 그 카드로 변신하여 플레이할 수 있는 시스템이 있습니다. 클래스 카드는 총 6개의 등급(일반, 고급, 희귀, 영웅, 전설, 신화)이 있으며, 영웅 등급 이상인 클래스부터 스탯, 속도, 스킬에 추가 효과를 주는 스킬 각성이 대폭 향상됩니다. 이러한 영웅 이상인 클래스의 특성 때문에 대부분 유저의 게임 초반 목표가 영웅 변신(주로 "영변"이라 부릅니다)일 정도로 이를 획득하는 것이 매우 중요합니다. 그리고, 이를 얻기 위해서는 많은 노력과 어느 정도의 운이 따라야 합니다. 

<img src = "/assets/works/class_get_causal_analysis/image0.png" alt="첫 영변을 얻었을 때 기분이란!" width="50%" />

 로또까지는 아니지만 노력과 행운, 그리고 획득하였을 때 매우 큰 이점이 존재한다는 점을 고려하였을 때, "그렇다면 영웅/전설 클래스 획득이 유저의 플레이 행동 변화를 야기하는 원인이 될까?"라는 궁금증이 생겼고 분석할 가치가 있다고 판단하였습니다. 그래서, 본 포스팅에서는 리니지2M 대상 "최초 영웅/전설 클래스 획득"이 "플레이 변화"에 미치는 영향을 분석한 내용을 공유드리고자 합니다.

(이하, 문장의 간결성을 위해 "최초 영웅/전설 클래스 획득 여부"를 "클래스 획득"이라고 하겠습니다)

# **분석 방식**

 분석 방법은 7일 간 최초로 영웅/전설 클래스를 획득한 유저(실험군), 최초로 영웅/전설 클래스를 획득하지 못한 유저(대조군)으로 나누어 그룹 간 플레이 변화의 평균 및 통계적 유의성을 확인하는 것입니다. 

 본 분석에서 가장 중요하게 생각한 부분은 인과 효과 추정이며, 이를 위해 통제가 필요한 외부 영향을 규명하는 절차로써 인과 추론 방식을 사용하였습니다.



## 인과 분석이 뭐지?

 본 분석에서 확인하고자 하는 것은 "최초 영웅/전설 클래스 획득"이 "플레이 변화"에 미치는 통계적 인과 효과 및 유의성입니다. 그렇다면 이를 측정하기 위해서는 어떤 방법을 사용하면 될까요? 단순하게 생각하면 아래와 같이 "클래스 카드 획득 여부"에 따른 실험군, 대조군의 "플레이 변화의 평균"이 통계적으로 차이가 존재하는지 검정하는 방법을 생각해볼 수 있을 것입니다. 

* "클래스 카드 획득" 를 독립변수(획득한 그룹의 값을 1, 획득하지 못한 그룹의 값을 0)로, "플레이 변화"를 종속 변수로 하여 회귀식을 구성
* 회귀식 fitting 후 독립변수의 회귀계수 및 유의성을 확인

 만약 이 방식을 사용하여 "클래스 카드 획득 그룹이 플레이 변화가 통계적으로 높음"이라는 결과나 나왔다고 합시다. 여기서 우리는 "그렇다면 클래스 카드 획득이 유저 플레이 변화에 긍정적인 영향을 미친다"라고 판단할 수도 있습니다. 더 나아가 "클래스 카드 획득은 유저 플레이를 긍정적으로 변화시키는 원인이 된다!" 라고 생각할 수도 있겠지요. 

 **하지만, 이렇게 분석하여 확인한 영향은 원인이라고 할 수 없습니다.** 그 이유는 실험군, 대조군의 특성이 동일하지 않기 때문입니다. 정확히 말하면 특성을 동일하지 않게 만드는 외생 변수가 존재하기 때문입니다. 

### confounder(교란 변수)

<img src = "/assets/works/class_get_causal_analysis/image1.png" alt="원인 변수와 결과 변수에 동시에 영향을 주는 교란 변수" width="50%" />

* 애초에 게임에 애착이 많은 유저는 클래스 획득 가능성이 높을 수 있으며, 플레이 변화가 증가할 가능성(게임을 열심히 함)도 높을 수 있습니다.
* 게임에 대한 애착도가 클래스 획득과 플레이 변화에 동시에 영향을 주기 때문에, 실제로 클래스 획득과 플레이 변화 간에 인과 관계가 없더라도 "상관성"이 생길 수 있습니다.(위에서 예를 들어 설명한 회귀식의 결과는 "인과 관계"가 아니라 "상관성"일 수 있습니다)
* 즉, 실제로 클래스 획득으로 인해 플레이 변화가 발생한 것이 아님에도 불구하고, 클래스 획득이 플레이 변화를 야기하는 윈인이다라는 잘못된 판단을 하게 될 수 있습니다.

 즉, 이처럼 교란 변수는 인과 관계 추정에 혼란을 야기하는 요소입니다. 따라서, 이를 규명하고 적절히 통제하여 영향 제거하는 절차를 거쳐야 우리가 확인하고자 하는 인과 관계를 올바르게 추정할 수 있습니다. 교란 변수의 영향을 제거하지 못한 채 단순히 "클래스 획득 여부"와 "플레이 변화"만으로 회귀 모델을 구성하여 영향을 추정하게 되면 편향된 결과를 얻을 수 있습니다. 

#### collider

 그렇다면 교란 변수로 판단되는 가능한 많은 변수를 통제하여 인과 관계를 추정하면 될까요? 여기서 조심해야할 것이 있습니다. 원인 변수와 결과 변수의 영향을 동시에 받는 변수인 collider는 통제 대상에서 제외하여야 합니다. 원인 변수와 결과 변수의 영향을 동시에 받는 collider를 통제하면 이를 만족하는 원인 변수 값, 결과 변수 값을 가진 샘플들만 남게 됩니다. 이는 원인 변수, 결과 변수 간에 특정 종속 관계를 형성하고 최종적으로 분석 시 편향을 유발합니다. 이를 collider bias라고 부릅니다.

원인 변수와 결과 변수 사이에 특정 종속 관계가 생기게 됩니다. 이는 해당 종속 관계를 만족하는 원인 변수, 결과 변수 값을 갖는 샘플들만 남게 됨을 의미합니다. 그리고 이는 편향이 발생시키는데 이를 collider bias라고 부릅니다. 

<img src = "assets/works/class_get_causal_analysis/image2.png" alt="원인 변수와 결과 변수에 동시에 영향을 받는 collider" width="50%" />

즉, 실제로는 원인 변수와 결과 변수 간 인과 관계가 없더라도 collider를 통제하여 추정하면 원인 변수와 결과 변수 간에 상관성이 생기게 됩니다. 그리고 우리는 그 상관성을 인과 관계로 오해할 수 있기 때문에 collider는 통제 대상에서 제외해야하는 것입니다.



**정리하면, 우리가 보고자 하는 원인 변수(클래스 획득)가 결과 변수(플레이 변화)에 미치는 인과 효과를 추정하기 위해서는 다양한 변수 간 관계를 고려하여 실제로 통제가 필요한 변수만을 선별하는 절차가 필요합니다.**

* **통제 변수가 될 수 있는 변수 후보를 추립니다.**
* **원인 변수, 결과 변수, 통제 변수 간 인과 관계를 인과 다이어그램으로 표시합니다.**
* **인과 다이어그램에서 인과 효과(원인 변수 -> 결과 변수로 향하는 path)를 제외한 모든 path를 통제할 수 있는 통제 변수 집합을 규명합니다.**
* **규명한 통제 변수 집합을 회귀식에 통제하여 인과 효과를 추정합니다.** 

# **분석 설계**

위에서 정리한 내용을 바탕으로 다음과 같이 인과 분석을 설계하였습니다. 

1. 변수 정의
2. 분석 기간 선정
3. 대상 선정
4. 비교 그룹
5. 인과 다이어그램을 통한 통제 변수 구성

## 1. 변수 정의

#### 1-1. 원인 변수 및 결과 변수

 원인 변수는 위에서 설명드린 것과 같이 7일 간 "최초 영웅/전설 클래스 획득 여부"로 정의하였습니다.

 플레이 변화는 유저가 게임을 열심히 하는지를 반영할 수 있도록 1) 유저가 게임에 투입하는 시간 및 자본, 2) 유저가 즐기는 컨텐츠의 변화 두 가지 관점으로 살펴보았습니다. 유저가 게임에 투입하는 시간 및 자본이 증가하거나, 투입하는 시간의 변화가 적더라도 상위 컨텐츠를 이용하게 되는 경우 게임을 열심히 하게 되는 것 이라고 판단였기 때문입니다. 

* 원인 변수
  *  최초 영웅/전설 클래스 획득 여부 (획득 : 실험군, 미획득 : 대조군)
* 결과 변수(플레이 변화)
  * 전후 30일 간 접속 일수 변화(1번 항목 반영)
  * 전후 30일 간 결제 금액 변화(1번 항목 반영)
  * 4주 후 유저 그룹 지표 상향 여부(2번 항목 반영)

#### 1-2. 통제 변수 후보

 통제 변수 후보로는 원인 변수, 결과 변수에 영향을 미칠 것으로 예상되는 변수를 탐색하였습니다. 

 MMORPG 특성 상 유저는 성장 -> 정체 -> 이탈 고려 의 과정을 경험하는데, 각 과정마다 영웅/전설 클래스 획득과 플레이 변화에 영향을 미칠 것으로 예상되는 총 9개의 변수를 선정하였습니다. 원인 변수 측정 기간 최대 14일 전까지로 기간을 두어 집계하였습니다. 

## 2. 분석 기간 선정

 분석 결과가 여러 기간에 걸쳐 동일하게 나타나는지, 또는 일부 기간에만 일시적으로 나타나는지에 대한 재현성을 확인하기 위해 총 5개의 기간을 선정하였습니다.

 주요 클래스 업데이트 시점을 분석 기간을 선택하는 기준으로 삼았는데, 그 이유는 주요 클래스 업데이트 이후 게임 내 클래스의 가치가 변할 것이고, 이에 따라 클래스 획득이 플레이 변화에 미치는 인과 효과도 변할 것이라고 판단하였기 때문입니다.

 클래스 업데이트는 신규 무기를 지닌 클래스 출시(대규모 업데이트), 기존 무기를 지닌 클래스 추가(비교적 소규모 업데이트) 두 종류로 나눌 수 있었습니다. 업데이트 규모를 나타내는 클래스 종류에 따라서도 인과 효과가 어떻게 나타나는지 확인할 수 있을 것이라고 판단하였습니다. 

|  no  | 원인 변수 측정 기간(7일 간) |      클래스 업데이트 종류 및 시점       |      클래스 업데이트 설명       |
| :--: | :-------------------------: | :-------------------------------------: | :-----------------------------: |
|  1   |   2020.07.08 ~ 2020.07.14   | 신규 무기 클래스 출시 (2020.06.24) 이후 |      신규 클래스 "창" 출시      |
|  2   |   2020.10.14 ~ 2020.10.20   | 기존 무기 클래스 추가 (2020.10.13) 이후 |  전설 : 2개 / 영웅 : 4개 추가   |
|  3   |   2020.12.09 ~ 2020.12.15   | 신규 무기 클래스 출시 (2020.11.25) 이후 |     신규 클래스 "대검" 출시     |
|  4   |   2021.01.06 ~ 2021.01.12   | 신규 등급 클래스 출시 (2020.12.29) 이후 | 신화 클래스/무기 획득 유저 등장 |
|  5   |   2021.02.10 ~ 2021.02.16   | 기존 무기 클래스 추가 (2021.01.25) 이후 |  전설 : 1개 / 영웅 : 3개 추가   |



## 3. 대상 선정

<img src = "/assets/works/class_get_causal_analysis/image3.png" alt="변수 집계 기간 선정을 위한 실험군, 대조군 d시점 매칭" width="85%" />

분석 대상은 원인 변수 측정 기간 전 영웅/전설 클래스 획득 이력이 없고, 측정 기간 동안 접속 및 영웅/전설 클래스 획득 시도 이력이 있는 유저로 선정하였습니다. 그 후, 원인 변수 측정 기간 동안 영웅/전설 클래스 획득 여부에 따라 실험군, 대조군 후보로 나누고 변수 집계 기간을 고려하기 위해 일자별로 유저를 매칭하였습니다

* 실험군(d시점) : 측정 기간 7일 간 영웅/전설 클래스 최초 획득을 d시점에 한 유저
* 대조군(d시점) : 측정 기간 7일 간 영웅/전설 클래스 최초 획득 시도를 d시점에 하였고 실패한 유저

 분석 대상 선정 시 원인 변수 측정 기간 동안 접속 이력을 조건으로 둔 이유는 역인과 관계로 인한(접속 -> 클래스 획득) 편향을 방지하기 위함입니다. 예를 들면, 측정 기간 동안 게임에 접속하지 않은 유저는 클래스 획득을 하지 못했을 것이고, 이러한 유저가 분석에 포함된다면 명확한 인과효과 추정이 어려울 것입니다.  

## 4. 세부 그룹

 클래스 획득이 플레이 변화에 미치는 영향이 특정 그룹에 따라 다르게 나타날 수가 있기 때문에, 그룹별로 나누어 인과 효과를 측정하였습니다. 

가령, 유저가 PVP나 전투를 즐기는지 여부에 따라 클래스 획득이 유저 플레이에 변화에 미치는 영향이 다를 수 있습니다. PVP나 전투를 즐기는 유저는 클래스 획득이 매우 중요하여 향후 플레이 증가에 큰 영향을 미칠 수 있고, 사냥 위주 플레이를 즐기는 유저에게는 큰 영향이 없을 수 있습니다. 그런데 이러한 유저의 PVP 및 전투 특성을 고려하지 않고 전체 집단에 대해 인과효과를 추정하게 되면, 두 그룹에서 각각 발생하는 인과효과가 상쇄되어 인과효과가 존재하지 않는다는 결과가 나올 수 있습니다. 따라서, 인과 효과가 다르게 나타날 것으로 판단되는 기준에 따라 그룹을 나누어주어야 합니다. 

 그래서 본 분석에서는 유저 플레이 성향을 대표하는 유저 그룹 지표에 따라 그룹을 나누어 인과효과를 추정하는 것이 적절하다고 판단하였습니다.

* 그룹1 : 그룹2 대비 사용 시간, 게임 컨텐츠 참여도가 높은 유저
* 그룹2 : 사용 시간이 적고 게임 컨텐츠 참여도가 적은 유저

그리고, 결제 금액 변화에 대한 인과 효과 추정 시에는 기존 결제 여부에 따라 그룹을 추가로 나누어 분석을 진행하였습니다.   

* 과금 유저 : 계정 생성 후 d시점 전날까지 결제를 한 이력이 있는 유저
* 무과금 유저 : 계정 생성 후 d시점 전날까지 결제를 한 이력이 없는 유저

|   인과 효과 추정    |                         그룹별 비교                          |
| :-----------------: | :----------------------------------------------------------: |
|   접속 일수 변화    |                 유저 그룹 지표(그룹1, 그룹2)                 |
|   결제 금액 변화    | 유저 그룹 지표(그룹1, 그룹2)<br />기존 결제 여부(과금, 무과금) |
| 유저 그룹 상향 여부 |                 유저 그룹 지표(그룹1, 그룹2)                 |



## 5. 인과 다이어그램을 통한 통제 변수 구성

 이제 도메인 지식을 바탕으로 위에서 정의한 원인 변수, 결과 변수, 통제 변수 후보 간 인과 관계를 인과 다아어그램으로 표현합니다. 인과 다이어그램에서 노드는 변수를 의미하며, 화살표는 직접적인 인과 관계를 의미합니다. 화살표가 시작하는 노드는 원인, 화살표가 도착하는 노드는 결과입니다.

 우리가 알고 싶은 인과 효과는 아래의 C1 엣지입니다. C1 엣지의 효과만을 추정하기 위해서는 C1 엣지를 제외한 원인 변수와 결과 변수를 연결하는 모든 엣지의 영향을 차단하여야 합니다. 이를 위해 아래 과정을 거쳐 통제 변수를 선정하고 최종적으로 모델에 반영하였습니다.

1. 원인 변수, 결과 변수에 직접적인 영향을 주지 않는 인과 관계 무시
2. 원인 변수 외에 결과 변수에 영향을 주는 인과 관계 통제
3. collider 변수는 통제 변수에서 제외

### 5-1. 접속 일수 변화 인과 다이어그램

<img src = "/assets/works/class_get_causal_analysis/image4.png" alt="접속 일수 변화에 대한 인과 다이어그램" width="60%" />

1번 조건

* 클래스 획득, 접속 일수 변화 노드에 연결되지 않는 엣지를 의미합니다(C3, C4, C5, C6, C12, C13)
* 해당 엣지가 향하는 노드를 통제함으로써 해당 인과 관계를 무시할 수 있습니다.(성장1, 성장2, 성장3, 성장4, 이탈고려2, 이탈고려3 노드 통제)

2번 조건

* 접속 일수 변화 노드에 직접적으로 인과 영향을 미치는 클래스 획득을 제외한 노드입니다(C7, C8, C9, C10, C11, C14)
* 해당 노드들은 측정하려는 인과효과(C1) 이외에 접속 일수 변화에 영향을 미치는 변수이므로 통제가 필요합니다(성장2, 성장3, 성장4, 이탈고려2, 이탈고려3, 정체1 노드 통제)

3번 조건

* 클래스 획득, 접속 일수 변화 노드로부터 동시에 영향을 받는 노드를 의미합니다(없음)
* 해당 변수는 위에서 설명한 collider이므로, 통제 변수에서 제외하여야 합니다.

최종 통제 변수 선정

* 이제 최종적으로 통제해야 하는 변수를 선정합니다. 
* 1번, 2번 조건에서 선정된 통제 변수 집합 중 collider(3번 조건)를 제외한 변수(성장1,성장2,성장3, 성장4, 이탈고려2, 이탈고려3, 정체1)

이제 인과 효과 추정을 위해 선정된 통제 변수를 포함하여 모델을 구성합니다. 본 분석에서는 원인 변수, 통제 변수를 독립 변수로 하고 결과 변수를 종속 변수로 하는 선형 회귀 모델을 사용하였습니다.

* 접속 일수 변화 ~ 클래스 획득 여부 + 성장1 + 성장2 + 성장3 + 성장4 + 이탈고려2 + 이탈고려3 + 정체1

### 5-2. 결제 금액 변화 인과 다이어그램

<img src = "/assets/works/class_get_causal_analysis/image5.png" alt="결제 금액 변화에 대한 인과 다이어그램" width="60%" />

위의 방식과 마찬가지로 최종 통제 변수를 선정하여 모델을 설계하면 아래와 같습니다.

* 결제 금액 변화 ~ 클래스 획득 여부 + 성장1 + 성장5 + 이탈고려3 + 정체1

### 5-3. 유저 그룹 지표 상향  인과 다이어그램

 유저 그룹 지표의 경우 접속 일수, 결제 금액 등 전반적인 게임 플레이 활동량에 따라 산출되는 변수입니다. 따라서 접속 일수, 결제 금액의 인과 효과 추정 시 최종적으로 선정한 통제 변수 후보의 합집합을 통제 변수로 사용하였습니다. 

 그리고 접속 일수 변화, 결제 금액 변화와 다르게 변수의 값이 binary type(0 또는 1)이므로 인과 효과 추정 시 로지스틱 회귀 모델을 사용하였습니다.

* 유저 그룹 상향 여부 ~ 클래스 획득 여부 + 성장1 + 성장2 + 성장3 + 성장4 + 성장5 + 이탈고려2 + 이탈고려3 + 정체1



# **분석 결과**

 다음은 실제로 모델을 fitting하여 인과 효과를 추정한 결과입니다. 5개의 분석 기간에서 영향은 조금씩 상이하나 전반적으로 "최초 영웅/전설 클래스 획득은 유저의 플레이 증가에 영향을 미친다"라는 결과가 나왔습니다. 그래서 아래의 결과는 클래스 업데이트 종류 하나씩 총 2개의 분석 기간에 대해서만 정리하였습니다. 

* 신규 무기 클래스 출시 업데이트(대규모) 이후 기간 : 2020.07.08 ~ 2020.07.14
* 기존 무기 클래스 추가 업데이트(소규모) 이후 기간 : 2020.12.09 ~ 2020.12.15

 아래의 그래프는 클래스를 획득하지 못한 그룹(대조군) 대비 클래스를 획득한 그룹(실험군)의 결과 변수에 대한 차이의 평균 및 신뢰 구간을 나타냅니다. 이는 최초 영웅/전설 클래스를 획득이 결과 변수에 미치는 인과 효과이며 신뢰 구간에 0인 값이 포함되지 않는다면 인과 효과는 유의한 것으로 해석합니다.

### 5-1. 접속 일수 변화에 미치는 인과 효과 추정

| 2020.07.08 ~ 2020.07.14                                      | 2020.12.09 ~ 2020.12.15                                      |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| <img src = "/assets/works/class_get_causal_analysis/image6_1.png" alt="전후 30일 간 접속 일수 변화에 대한 인과 효과(2020.07.08 ~ 2020.07.14)" width="85%" /> | <img src = "/assets/works/class_get_causal_analysis/image6_2.png" alt="전후 30일 간 접속 일수 변화에 대한 인과 효과(2020.12.09 ~ 2020.12.15)" width="85%" /> |

 모든 유저 그룹에서 최초 영웅/전설 클래스는 획득은 30일 간 플레이 증가에 유의한 영향을 미치는 것으로 나타납니다. 여기서 그룹 간 영향의 크기 차이가 존재하는데 그룹1에 비해 게임 참여도가 낮은 그룹2에 더 큰 영향을 미치는 것을 알 수 있습니다.

 그리고, 소규모 업데이트 이후보다 대규모 업데이트 이후에서 영향이 크게 나타난 것을 알 수 있습니다.

 **-> 영웅/전설 클래스를 획득은 유저의 접속을 독려하는 효과가 있으며, 특히 게임 참여도가 낮은 그룹에 효과가 크다**

### 5-2. 결제 금액 변화에 미치는 인과 효과 추정

| 구분   | 2020.07.08 ~ 2020.07.14                                      | 2020.12.09 ~ 2020.12.15                                      |
| ------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 무과금 | <img src = "/assets/works/class_get_causal_analysis/image7_1.png" alt="전후 30일 간 결제 금액 변화에 대한 인과 효과(무과금, 2020.07.08 ~ 2020.07.14)"/> | <img src = "/assets/works/class_get_causal_analysis/image7_2.png" alt="전후 30일 간 결제 금액 변화에 대한 인과 효과(무과금, 2020.12.09 ~ 2020.12.15)"/> |
| 과금   | <img src = "/assets/works/class_get_causal_analysis/image7_3.png" alt="전후 30일 간 결제 금액 변화에 대한 인과 효과(과금, 2020.07.08 ~ 2020.07.14)"/> | <img src = "/assets/works/class_get_causal_analysis/image7_4.png" alt="전후 30일 간 결제 금액 변화에 대한 인과 효과(과금, 2020.12.09 ~ 2020.12.15)"/> |

 모든 유저 그룹에서 최초 영웅/전설 클래스 획득은 30일 간 결제 금액 증가에 유의한 영향을 미치는 것으로 나타납니다. 여기서 주목할 점은 무과금, 과금 그룹에 미치는 영향의 크기 차이입니다. 무과금 그룹보다 과금 그룹에서 결제 금액 변화에 대한 인과 효과가 큰 것을 알 수 있습니다. 

**-> 영웅/전설 클래스를 획득은 유저의 결제 증가에 영향을 미치며, 과금 그룹에서 효과가 더 크게 나타난다**

### 5-3. 유저 그룹 상향 여부에 미치는 인과 효과 추정

| 2020.07.08 ~ 2020.07.14                                      | 2020.12.09 ~ 2020.12.15                                      |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| <img src = "/assets/works/class_get_causal_analysis/image8_1.png" alt="4주 후 유저 그룹 상향 여부 확률에 대한 인과 효과(2020.07.08 ~ 2020.07.14)" width="85%"/> | <img src = "/assets/works/class_get_causal_analysis/image8_2.png" alt="4주 후 유저 그룹 상향 여부 확률에 대한 인과 효과(2020.12.09 ~ 2020.12.15" width="85%"/> |

 사용한 로지스틱 회귀 모델에서 회귀 계수는 로그 오즈비를 나타지만 이를 그대로 사용하지 않고, 결과 해석에 편의를 위해 결과 변수가 1일 확률에 대한 원인 변수의 미분값을 이용해 marginal effect 를 구하였습니다. 즉, x축이 의미하는 것은 최초 영웅/전설 클래스 획득이 유저 그룹이 상향될 확률에 미치는 인과 효과를 의미합니다.

모든 유저 그룹에서 최초 영웅/전설 클래스 획득은 유저 그룹 상향 확률 증가에 유의한 영향을 미치는 것으로 나타납니다. 여기서 유저 그룹 간 영향 크기 차이가 존재하는데 그룹1에 비해 게임 참여도가 낮은 그룹2에서 더 큰 영향이 나타나는 것을 알 수 있습니다. 

유저 그룹 상향은 전반적인 게임 참여도 증가를 의미하므로, 아래와 같이 해석할 수 있습니다.

**-> 영웅/전설 클래스를 획득은 유저의 전반적인 게임 플레이 증가에 영향을 미치며, 특히 게임 참여도가 저조한 그룹에 효과가 크게 나타난다.**

# **마치며**

 지금까지 게임 내 컨텐츠가 유저의 플레이 변화에 원인이 되는지 인과 분석에 대해 소개드렸습니다. 최초 영웅/전설 클래스를 획득 자체가 유저의 단기간(30일) 플레이 증대에 긍정적인 영향을 주었고, 기존의 유저 성향 및 게임 애착도에 따라 영향이 다르게 나타난 것을 알 수 있었습니다. 

 본 포스팅에서는 주로 분석 기법 및 결과에 대한 내용을 다루었지만 실제로 분석을 진행하며 가장 중요하다고 느낀 것은 도메인 지식입니다. 본 분석에서 핵심이라고 할 수 있는 인과 다이어그램 자체가 도메인에 대한 이해를 바탕으로 설계되어야 하기 때문이죠. 예를 들어 도메인 지식이 없이 실제로 collider인 변수를 confounder로 착각하여 분석한다면 실제 인과 효과가 아닌 편향된 결과를 얻을 것입니다. 

즉, 분석 기법이 아무리 훌륭하여도 도메인 지식이 없다면 설계 단계부터 잘못되어 있을 가능성이 높고 결국 잘못된 분석 결과가 나올 수 있습니다. 그만큼 설계 부분에 많은 고민과 시간을 투자해야한다는 생각이 듭니다.